<script type="text/javascript">
    var form_validation=true;
    function submit_snapshot_update(isforce){
        var snapshot_name = $("#div_snapshot_create_update").find("#snapshot_name_cr");
     	var bValid = true;
//        bValid = snapshot_scale(capacity.val(),false);
        bValid = bValid && checkLength(snapshot_name, "名称", 1, 32 );
        if (bValid) {
            $(".table .error_tip").hide();
            if (isforce){form_validation = true}
          if(form_validation){
             $(".callback_error_tip").text("正在提交中......").css({"display":"block","color":'#000'});        
            form_validation=false;
            $.post("/snapshot_update",{
                        "name" : snapshot_name.val(),    
                        "id":"{{ snapshot.id }}"
                        },
                    function(data){
                        if (data.reply.is_success){
                            //$("#div_snapshot_create_update").dialog("close");
                            $('#snapshot_table').trigger("reloadGrid");
                            snapshots_show("{{ snapshot.volume_id }}")
                        }else{
                            error =  data.reply.error;
                            $(".callback_error_tip").css("display","block");
                            $(".callback_error_tip").text(error);
                            form_validation=true;                           
                        }
                 });
           }
          else
          {
             $(".callback_error_tip").text("正在提交中......").css({"display":"block","color":'#000'});        
           }
        }
    }
</script>
<style>
.table .tb-item-value > div:first-child{margin-bottom:5px;color:#666}
</style>
<div id="dialog_snapshot_update" title="创建快照">  
    <!--<div class="error_tip"></div>-->
    <form id="snapshot_add_form">
    <p>&nbsp;带<a class="high_tip_red">*</a>号的必填项</p>
    <div class="callback_error_tip error_tip"></div>            
    <div class="error_tip"></div>
    <table class="table">
        <tr class="tr-back">
            <td class="tb-item-name"><label for="snapshot_name_cr">快照名称:</label><a>*</a></td>
            <td class="tb-item-value">
         	 	<div>(由1到32位以下大小写英文字母、数字、中划线(英文)或下划线构成）</div> 
         	 	<div class="error_tip"></div>
          		<input id="snapshot_name_cr" name="snapshot_name_cr" size="25" type="text" value="{{ snapshot.name |default('', True) }}"/>
            </td>             
        </tr>
    </table>
    </table>
    </form>
</div>
<div id='warn_size_confirm' >
</div>
